[build]
builder = "NIXPACKS"

[build.env]
# Enable V2 runtime for better FastAPI support
NIXPACKS_V2 = "true"
# Specify exact Python version
NIXPACKS_PYTHON_VERSION = "3.11"

# Railway-specific package configuration
NIXPACKS_PKGS = "git libpq-dev libssl-dev"

[deploy]
# V2 runtime: uvicorn startup in backend directory
startCommand = "./start.sh"
healthcheckPath = "/health"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Railway V2 runtime settings
sleepApplication = false
railwayTomlPath = "railway.toml"

[env]
# Core Application
APP_URL = "https://assistme-virtualassistant-production.up.railway.app"
APP_NAME = "AssistMe Virtual Assistant"
DEV_MODE = "false"

# Database (auto-provided by Railway)
# DATABASE_URL - automatically set by Railway PostgreSQL

# Redis (auto-provided by Railway)
# REDIS_URL - automatically set by Railway Redis

# OpenRouter API Configuration
# OPENROUTER_API_KEY should be set as an environment variable in Railway dashboard
# DO NOT commit API keys to the repository
OPENROUTER_API_KEY = ""
OPENROUTER_BASE_URL = "https://openrouter.ai/api/v1"

# Grokipedia RAG Configuration
GROKIPEDIA_DEFAULT_ENABLED = "true"
GROKIPEDIA_DATA_PATH = "data/grokipedia.json"
GROKIPEDIA_EMBED_MODEL = "sentence-transformers/all-MiniLM-L6-v2"

# MiniMax Multimodal Configuration
MINIMAX_API_KEY = "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJHcm91cE5hbWUiOiJNYW5nZXNoIFJhdXQiLCJVc2VyTmFtZSI6Ik1hbmdlc2ggUmF1dCIsIkFjY291bnQiOiIiLCJTdWJqZWN0SUQiOiIxOTgzMDIwODk3Mzg4MjA4OTcxIiwiUGhvbmUiOiIiLCJHcm91cElEIjoiMTk4MzAyMDg5NzM4NDAxMDU3MSIsIlBhZ2VOYW1lIjoiIiwiTWFpbCI6Im1hbmdlc2hyYXV0NzEyOThAZ21haWwuY29tIiwiQ3JlYXRlVGltZSI6IjIwMjUtMTAtMjggMjM6MTI6MDYiLCJUb2tlblR5cGUiOjEsImlzcyI6Im1pbmltYXgifQ.ttQ_XzLr9CitOO0gjMO6kPfg8dbPXn6puesHU3ylXxHvgyOvJbrnQFwgpfQ3Ii9EYYMyq6agyX2ST0NZIjpdq-PJfrjWtdUG7yOizF1EbDWf3JaputKDbKIg7pk6nPDt0BYFSN5d2MHLpUaVJ-Nv0FpoDgSrX5uXxSBH_lQ-vsrc6mibIsELhTMOTHK3K2FtJl-alsvxyPLTVXWjHa38FRSdcKWIRdr9Xqr--5rCNXvUT52mzkT_ofMmJy5l0g0qfA7YNDPW0bZ5KalSVCeC7ufSk1iRqqx8HCkFX1HS5eq9ylEqetqXjnane20HFLQ-xX1I9HwKbQmdR0DHzJfUWA"
MINIMAX_BASE_URL = "https://api.minimax.chat/v1"
MINIMAX_AGENT_MODEL = "minimax/minimax-m2"
MINIMAX_TTS_MODEL = "speech-02"
MINIMAX_IMAGE_MODEL = "image-01"
MINIMAX_VIDEO_MODEL = "hailuo-02"

# GitHub Integration (optional)
GITHUB_TOKEN = ""
GITHUB_DEFAULT_REPO = ""
